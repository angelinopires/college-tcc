(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{fAJX:function(t,e,a){"use strict";a.r(e),a.d(e,"OrdersModule",(function(){return Jt}));var n=a("ofXK"),o=a("3Pt+"),i=a("tyNb"),c=a("agfR"),r=a("R0Ic"),l=a("Dh3D"),b=a("+0xr"),d=a("wd/R"),m=a("1ua0"),s=a("vglk"),u=a("KWTU"),f=a("QMTT"),p=a("IDco"),g=a("Edqf"),h=a("fXoL"),S=a("0IaG"),_=a("kmnG"),C=a("d3UM"),P=a("FKr1"),v=a("QibW"),R=a("bTqV"),M=a("Qu3c"),O=a("CGfp"),w=a("EbQt");function x(t,e){if(1&t&&(h.Sb(0,"mat-option",13),h.zc(1),h.Rb()),2&t){var a=e.$implicit;h.ic("value",a),h.Bb(1),h.Bc(" ",a.companyName," ")}}function D(t,e){1&t&&h.Nb(0,"mat-header-cell")}function z(t,e){if(1&t&&(h.Sb(0,"mat-cell"),h.Nb(1,"mat-radio-button",45),h.Rb()),2&t){var a=e.$implicit,n=h.dc(3);h.Bb(1),h.ic("value",a)("disabled",!n.providerHasMaterialPrices(a.id))}}function y(t,e){1&t&&(h.Sb(0,"mat-header-cell",46),h.zc(1,"#"),h.Rb())}function B(t,e){if(1&t&&(h.Sb(0,"mat-cell",47),h.zc(1),h.Rb()),2&t){var a=e.$implicit;h.Bb(1),h.Bc(" ",a.id," ")}}function F(t,e){1&t&&(h.Sb(0,"mat-header-cell",46),h.zc(1,"Observa\xe7\xe3o"),h.Rb())}function E(t,e){if(1&t&&(h.Sb(0,"mat-cell",48),h.zc(1),h.Rb()),2&t){var a=e.$implicit;h.Bb(1),h.Bc(" ",a.description," ")}}function k(t,e){1&t&&(h.Sb(0,"mat-header-cell",46),h.zc(1,"Criado em"),h.Rb())}function Q(t,e){if(1&t&&(h.Sb(0,"mat-cell",49),h.zc(1),h.ec(2,"dateFormat"),h.Rb()),2&t){var a=e.$implicit;h.Bb(1),h.Bc(" ",h.fc(2,1,a.requestDate)," ")}}function T(t,e){1&t&&(h.Sb(0,"mat-header-cell",46),h.zc(1,"Data Desejada"),h.Rb())}function j(t,e){if(1&t&&(h.Sb(0,"mat-cell",50),h.zc(1),h.ec(2,"dateFormat"),h.Rb()),2&t){var a=e.$implicit;h.Bb(1),h.Bc(" ",h.fc(2,1,a.deadlineDate)," ")}}function A(t,e){1&t&&(h.Sb(0,"mat-header-cell",46),h.zc(1,"Situa\xe7\xe3o"),h.Rb())}function $(t,e){if(1&t&&(h.Sb(0,"mat-cell",51),h.Sb(1,"span",52),h.zc(2),h.Rb(),h.Rb()),2&t){var a=e.$implicit,n=h.dc(3);h.Bb(1),h.Eb("badge-success","Respondido"===n.priceStatusEnum[a.status]),h.Bb(1),h.Bc(" ",n.priceStatusEnum[a.status]," ")}}function I(t,e){1&t&&(h.Sb(0,"mat-header-cell",46),h.zc(1,"Respondido em"),h.Rb())}function N(t,e){if(1&t&&(h.Sb(0,"mat-cell",53),h.zc(1),h.ec(2,"dateFormat"),h.Rb()),2&t){var a=e.$implicit;h.Bb(1),h.Bc(" ",h.fc(2,1,a.responseDate)," ")}}function L(t,e){1&t&&(h.Sb(0,"mat-header-cell",46),h.zc(1,"Prazo sugerido"),h.Rb())}function H(t,e){if(1&t&&(h.Sb(0,"mat-cell",54),h.zc(1),h.ec(2,"dateFormat"),h.Rb()),2&t){var a=e.$implicit;h.Bb(1),h.Bc(" ",h.fc(2,1,a.suggestedDate)," ")}}function q(t,e){1&t&&(h.Sb(0,"mat-header-cell"),h.zc(1,"A\xe7\xf5es"),h.Rb())}function G(t,e){if(1&t){var a=h.Tb();h.Sb(0,"mat-cell",55),h.Sb(1,"div",56),h.Sb(2,"button",57),h.Zb("click",(function(){h.pc(a);var t=e.$implicit,n=h.dc(3);return n.expandedElement=n.expandedElement===t?null:t})),h.Sb(3,"i",58),h.zc(4,"table_view"),h.Rb(),h.Rb(),h.Rb(),h.Rb()}}function K(t,e){if(1&t&&(h.Sb(0,"tr"),h.Sb(1,"td"),h.zc(2),h.Rb(),h.Sb(3,"td"),h.zc(4),h.Rb(),h.Sb(5,"td"),h.zc(6),h.ec(7,"currencyBrl"),h.Rb(),h.Sb(8,"td"),h.zc(9),h.ec(10,"currencyBrl"),h.Rb(),h.Rb()),2&t){var a=e.$implicit;h.Bb(2),h.Ac(a.material.description),h.Bb(2),h.Ac(a.material.amount),h.Bb(2),h.Ac(h.fc(7,4,a.unityPrice)),h.Bb(3),h.Bc("",h.fc(10,6,a.unityPrice*a.material.amount)," ")}}function V(t,e){if(1&t&&(h.Sb(0,"table",61),h.Sb(1,"thead"),h.Sb(2,"tr"),h.Sb(3,"th",62),h.zc(4,"Material"),h.Rb(),h.Sb(5,"th",62),h.zc(6,"Quantidade"),h.Rb(),h.Sb(7,"th",62),h.zc(8,"Pre\xe7o Unit\xe1rio"),h.Rb(),h.Sb(9,"th",62),h.zc(10,"Subtotal"),h.Rb(),h.Rb(),h.Rb(),h.Sb(11,"tbody"),h.xc(12,K,11,8,"tr",63),h.Rb(),h.Rb()),2&t){var a=h.dc().$implicit,n=h.dc(3);h.Bb(12),h.ic("ngForOf",n.getMaterialsPrices(a.id))}}function J(t,e){1&t&&(h.Sb(0,"p",64),h.zc(1,"O fornecedor selecionado n\xe3o possui nenhum material cotado."),h.Rb())}function U(t,e){if(1&t&&(h.Sb(0,"mat-cell"),h.Sb(1,"div"),h.xc(2,V,13,1,"table",59),h.xc(3,J,2,0,"ng-template",null,60,h.yc),h.Rb(),h.Rb()),2&t){var a=e.$implicit,n=h.nc(4),o=h.dc(3);h.Cb("colspan",o.columnsToDisplay.length),h.Bb(1),h.ic("@detailExpand",a==o.expandedElement?"expanded":"collapsed"),h.Bb(1),h.ic("ngIf",o.providerHasMaterialPrices(a.id))("ngIfElse",n)}}function Z(t,e){1&t&&h.Nb(0,"mat-header-row")}function W(t,e){if(1&t&&h.Nb(0,"mat-row",65),2&t){var a=e.$implicit,n=h.dc(3);h.Eb("table__row--disabled",!n.providerHasMaterialPrices(a.id))}}function X(t,e){if(1&t&&h.Nb(0,"mat-row",66),2&t){var a=e.$implicit,n=h.dc(3);h.Eb("table__row--expanded",n.expandedElement===a)}}var Y=function(){return["expandedMaterialPrice"]};function tt(t,e){if(1&t&&(h.Sb(0,"form",18),h.Sb(1,"mat-table",19),h.Qb(2,20),h.xc(3,D,1,0,"mat-header-cell",21),h.Sb(4,"mat-radio-group",22),h.xc(5,z,2,2,"mat-cell",23),h.Rb(),h.Pb(),h.Qb(6,24),h.xc(7,y,2,0,"mat-header-cell",25),h.xc(8,B,2,1,"mat-cell",26),h.Pb(),h.Qb(9,27),h.xc(10,F,2,0,"mat-header-cell",25),h.xc(11,E,2,1,"mat-cell",28),h.Pb(),h.Qb(12,29),h.xc(13,k,2,0,"mat-header-cell",25),h.xc(14,Q,3,3,"mat-cell",30),h.Pb(),h.Qb(15,31),h.xc(16,T,2,0,"mat-header-cell",25),h.xc(17,j,3,3,"mat-cell",32),h.Pb(),h.Qb(18,33),h.xc(19,A,2,0,"mat-header-cell",25),h.xc(20,$,3,3,"mat-cell",34),h.Pb(),h.Qb(21,35),h.xc(22,I,2,0,"mat-header-cell",25),h.xc(23,N,3,3,"mat-cell",36),h.Pb(),h.Qb(24,37),h.xc(25,L,2,0,"mat-header-cell",25),h.xc(26,H,3,3,"mat-cell",38),h.Pb(),h.Qb(27,39),h.xc(28,q,2,0,"mat-header-cell",21),h.xc(29,G,5,0,"mat-cell",40),h.Pb(),h.Qb(30,41),h.xc(31,U,5,4,"mat-cell",23),h.Pb(),h.xc(32,Z,1,0,"mat-header-row",42),h.xc(33,W,1,2,"mat-row",43),h.xc(34,X,1,2,"mat-row",44),h.Rb(),h.Rb()),2&t){var a=h.dc(2);h.ic("formGroup",a.priceForm),h.Bb(1),h.ic("dataSource",a.dataSource),h.Bb(31),h.ic("matHeaderRowDef",a.columnsToDisplay),h.Bb(1),h.ic("matRowDefColumns",a.columnsToDisplay),h.Bb(1),h.ic("matRowDefColumns",h.jc(5,Y))}}function et(t,e){1&t&&(h.Sb(0,"p"),h.zc(1,"N\xe3o h\xe1 cota\xe7\xf5es em aberto no momento."),h.Rb())}function at(t,e){if(1&t&&(h.Sb(0,"div",14),h.Sb(1,"div",15),h.Sb(2,"h4",3),h.zc(3,"Passo 02"),h.Rb(),h.Sb(4,"p",4),h.zc(5,"Escolha a cota\xe7\xe3o desejada"),h.Rb(),h.Rb(),h.Sb(6,"div",5),h.xc(7,tt,35,6,"form",16),h.xc(8,et,2,0,"ng-template",null,17,h.yc),h.Rb(),h.Rb()),2&t){var a=h.nc(9),n=h.dc();h.Bb(7),h.ic("ngIf",n.dataSource.data.length>0)("ngIfElse",a)}}function nt(t,e){1&t&&(h.Sb(0,"mat-header-cell"),h.zc(1,"#"),h.Rb())}function ot(t,e){if(1&t&&(h.Sb(0,"mat-cell",47),h.zc(1),h.Rb()),2&t){var a=e.$implicit;h.Bb(1),h.Bc(" ",a.material.id," ")}}function it(t,e){1&t&&h.Nb(0,"mat-footer-cell")}function ct(t,e){1&t&&(h.Sb(0,"mat-header-cell"),h.zc(1,"Material"),h.Rb())}function rt(t,e){if(1&t&&(h.Sb(0,"mat-cell",81),h.zc(1),h.Rb()),2&t){var a=e.$implicit;h.Bb(1),h.Bc(" ",a.material.description," ")}}function lt(t,e){1&t&&(h.Sb(0,"mat-footer-cell"),h.zc(1,"Frete:"),h.Rb())}function bt(t,e){1&t&&(h.Sb(0,"mat-header-cell"),h.zc(1,"Quantidade"),h.Rb())}function dt(t,e){if(1&t&&(h.Sb(0,"mat-cell",82),h.zc(1),h.Rb()),2&t){var a=e.$implicit;h.Bb(1),h.Bc(" ",a.material.amount," ")}}function mt(t,e){if(1&t&&(h.Sb(0,"mat-footer-cell"),h.zc(1),h.ec(2,"currencyBrl"),h.Rb()),2&t){var a=h.dc(2);h.Bb(1),h.Ac(h.fc(2,1,a.getFarePrice()))}}function st(t,e){1&t&&(h.Sb(0,"mat-header-cell",46),h.zc(1,"Preco"),h.Rb())}function ut(t,e){if(1&t&&(h.Sb(0,"mat-cell",83),h.zc(1),h.ec(2,"currencyBrl"),h.Rb()),2&t){var a=e.$implicit;h.Bb(1),h.Bc(" ",h.fc(2,1,a.material.unityPrice)," ")}}function ft(t,e){1&t&&(h.Sb(0,"mat-footer-cell"),h.Sb(1,"strong"),h.zc(2,"Total"),h.Rb(),h.Rb())}function pt(t,e){1&t&&(h.Sb(0,"mat-header-cell",46),h.zc(1,"Subtotal"),h.Rb())}function gt(t,e){if(1&t&&(h.Sb(0,"mat-cell",84),h.zc(1),h.ec(2,"currencyBrl"),h.Rb()),2&t){var a=e.$implicit;h.Bb(1),h.Bc(" ",h.fc(2,1,a.unityPrice*a.material.amount)," ")}}function ht(t,e){if(1&t&&(h.Sb(0,"mat-footer-cell"),h.zc(1),h.ec(2,"currencyBrl"),h.Rb()),2&t){var a=h.dc(2);h.Bb(1),h.Bc(" ",h.fc(2,1,a.getTotalPrice())," ")}}function St(t,e){1&t&&h.Nb(0,"mat-header-row")}function _t(t,e){1&t&&h.Nb(0,"mat-row",65)}function Ct(t,e){1&t&&h.Nb(0,"mat-footer-row")}function Pt(t,e){if(1&t){var a=h.Tb();h.Sb(0,"div",14),h.Sb(1,"div",2),h.Sb(2,"h4",3),h.zc(3,"Passo 03"),h.Rb(),h.Sb(4,"p",4),h.zc(5,"Confira as informa\xe7\xf5es"),h.Rb(),h.Rb(),h.Sb(6,"div",5),h.Sb(7,"div",67),h.Sb(8,"mat-table",68),h.Qb(9,24),h.xc(10,nt,2,0,"mat-header-cell",21),h.xc(11,ot,2,1,"mat-cell",26),h.xc(12,it,1,0,"mat-footer-cell",69),h.Pb(),h.Qb(13,27),h.xc(14,ct,2,0,"mat-header-cell",21),h.xc(15,rt,2,1,"mat-cell",70),h.xc(16,lt,2,0,"mat-footer-cell",69),h.Pb(),h.Qb(17,71),h.xc(18,bt,2,0,"mat-header-cell",21),h.xc(19,dt,2,1,"mat-cell",72),h.xc(20,mt,3,3,"mat-footer-cell",69),h.Pb(),h.Qb(21,73),h.xc(22,st,2,0,"mat-header-cell",25),h.xc(23,ut,3,3,"mat-cell",74),h.xc(24,ft,3,0,"mat-footer-cell",69),h.Pb(),h.Qb(25,75),h.xc(26,pt,2,0,"mat-header-cell",25),h.xc(27,gt,3,3,"mat-cell",76),h.xc(28,ht,3,3,"mat-footer-cell",69),h.Pb(),h.xc(29,St,1,0,"mat-header-row",42),h.xc(30,_t,1,0,"mat-row",77),h.xc(31,Ct,1,0,"mat-footer-row",78),h.Rb(),h.Rb(),h.Sb(32,"div",7),h.Sb(33,"div",79),h.Sb(34,"button",80),h.Zb("click",(function(){return h.pc(a),h.dc().createOrder()})),h.zc(35,"Enviar"),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb()}if(2&t){var n=h.dc();h.Bb(8),h.ic("dataSource",n.materialDataSource),h.Bb(21),h.ic("matHeaderRowDef",n.materialColumns),h.Bb(1),h.ic("matRowDefColumns",n.materialColumns),h.Bb(1),h.ic("matFooterRowDef",n.materialColumns),h.Bb(3),h.ic("disabled",n.priceForm.invalid||n.orderForm.invalid)}}var vt=function(){function t(t,e,a,n,i,c){this.fb=t,this._dialog=e,this._loadingService=a,this._orderService=n,this._priceService=i,this._providerService=c,this.dataSource=new b.o,this.materialDataSource=new b.o,this.columnsToDisplay=["radio","id","description","requestDate","deadline","status","responseDate","suggestedDate","actions"],this.materialColumns=["id","description","amount","price","subtotal"],this.priceStatusEnum=g.b,this.pricesMaterialsList=[],this.newOrderMaterials=[],this.orderForm=this.fb.group({provider:["",o.r.required]}),this.priceForm=this.fb.group({selectedPrice:["",o.r.required]})}return t.prototype.ngOnInit=function(){var t=this;this._setProvidersList(),this._setPricesList(),this.priceForm.valueChanges.subscribe((function(e){if(e&&e.selectedPrice){var a=t.orderForm.value.provider,n=e.selectedPrice,o=n.fare,i=n.id,c=n.suggestedDate;t.newOrder={createdAt:d().format(),deadlineDate:c,fare:o,id:t._orderService.getLastOrderId()+1,provider:a,status:"VALIDATION"};var r=t.getMaterialsPrices(i);t.newOrderMaterials=r.map((function(e){return{material:e.material,unityPrice:e.unityPrice,orderId:t.newOrder.id}})),t.materialDataSource=new b.o(t.newOrderMaterials)}}))},t.prototype.ngAfterViewInit=function(){this.dataSource.sort=this.sort},t.prototype.ngOnDestroy=function(){this.pricesMaterialSubscription&&this.pricesMaterialSubscription.unsubscribe(),this.pricesSubscription&&this.pricesSubscription.unsubscribe(),this.providerSubscription&&this.providerSubscription.unsubscribe()},t.prototype.applyFilter=function(t){this.dataSource.filter=t.trim().toLocaleLowerCase()},t.prototype.getMaterialsPrices=function(t){var e=this.orderForm.value.provider;return this.pricesMaterialsList.filter((function(a){return a.priceId===t&&a.provider.id===e.id}))},t.prototype.providerHasMaterialPrices=function(t){return this.getMaterialsPrices(t).length>0},t.prototype.getTotalPrice=function(){var t=0,e=this.priceForm.value.selectedPrice;return this.getMaterialsPrices(e.id).map((function(e){t+=e.material.amount*e.unityPrice})),t+e.fare},t.prototype.getFarePrice=function(){return this.priceForm.value.selectedPrice.fare},t.prototype.clearProviderForm=function(){this.orderForm.reset()},t.prototype.clearPriceForm=function(){this.priceForm.reset()},t.prototype.createOrder=function(){var t=this,e=this.priceForm.value.selectedPrice;this._loadingService.show(),this._orderService.setNewOrder(this.newOrder,e.id),this._orderService.setNewOrdersMaterials(this.newOrderMaterials),setTimeout((function(){t.newOrder=null,t.newOrderMaterials=[],t.clearPriceForm(),t.clearProviderForm(),t._giveFeedback(),t._loadingService.hide()}),2e3)},t.prototype._giveFeedback=function(){this._dialog.open(m.a,{data:{title:"Pedido de compras criado com sucesso!",description:"Clique em OK para acompanhar seu novo pedido.",routeToRedirect:"/pedidos"}})},t.prototype._setProvidersList=function(){var t=this;this._providerService.fetchProviders(),this.providerSubscription=this._providerService.providers.subscribe((function(e){e.length<=0||(t.providersList=e)}))},t.prototype._setPricesList=function(){var t=this;this._priceService.fetchPrices(),this.pricesSubscription=this._priceService.prices.subscribe((function(e){if(!(e.length<=0)){var a=e.filter((function(t){return"ANSWERED"===t.status}));t.dataSource=new b.o(a)}})),this.pricesMaterialSubscription=this._priceService.pricesMaterials.subscribe((function(e){e.length<=0||(t.pricesMaterialsList=e)}))},t.\u0275fac=function(e){return new(e||t)(h.Mb(o.d),h.Mb(S.b),h.Mb(s.a),h.Mb(u.a),h.Mb(f.a),h.Mb(p.a))},t.\u0275cmp=h.Gb({type:t,selectors:[["app-create"]],viewQuery:function(t,e){var a;1&t&&h.Cc(l.a,!0),2&t&&h.mc(a=h.ac())&&(e.sort=a.first)},decls:18,vars:4,consts:[[1,"main-content"],[1,"card"],[1,"card-header","card-header-warning"],[1,"card-title"],[1,"card-category"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-12","col-md-4"],["appearance","outline"],["formControlName","provider","required","",3,"change"],[3,"value",4,"ngFor","ngForOf"],["class","card mt-5",4,"ngIf"],[3,"value"],[1,"card","mt-5"],[1,"card-header","card-header-info"],["class","table table-responsive mat-elevation-z8",3,"formGroup",4,"ngIf","ngIfElse"],["feedback",""],[1,"table","table-responsive","mat-elevation-z8",3,"formGroup"],["matSortDisableClear","","matSortActive","id","matSortDirection","asc","multiTemplateDataRows","","matSort","",3,"dataSource"],["matColumnDef","radio"],[4,"matHeaderCellDef"],["formControlName","selectedPrice"],[4,"matCellDef"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],["data-label","#",4,"matCellDef"],["matColumnDef","description"],["data-label","Observa\xe7\xe3o",4,"matCellDef"],["matColumnDef","requestDate"],["data-label","Criado em",4,"matCellDef"],["matColumnDef","deadline"],["data-label","Data Desejada",4,"matCellDef"],["matColumnDef","status"],["data-label","Situa\xe7\xe3o",4,"matCellDef"],["matColumnDef","responseDate"],["data-label","Respondido em",4,"matCellDef"],["matColumnDef","suggestedDate"],["data-label","Prazo sugerido",4,"matCellDef"],["matColumnDef","actions"],["class","td-actions text-center","data-label","A\xe7\xf5es",4,"matCellDef"],["matColumnDef","expandedMaterialPrice"],[4,"matHeaderRowDef"],["class","table__row",3,"table__row--disabled",4,"matRowDef","matRowDefColumns"],["class","table__row table__row--details",3,"table__row--expanded",4,"matRowDef","matRowDefColumns"],[3,"value","disabled"],["mat-sort-header",""],["data-label","#"],["data-label","Observa\xe7\xe3o"],["data-label","Criado em"],["data-label","Data Desejada"],["data-label","Situa\xe7\xe3o"],[1,"badge"],["data-label","Respondido em"],["data-label","Prazo sugerido"],["data-label","A\xe7\xf5es",1,"td-actions","text-center"],[1,"btn-group"],["mat-raised-button","","matTooltip","Visualizar Materiais","rel","tooltip","type","button",1,"btn","btn-info",3,"click"],[1,"material-icons"],["class","table table-responsive table--expanded",4,"ngIf","ngIfElse"],["noMaterialsFeedback",""],[1,"table","table-responsive","table--expanded"],["scope","col"],[4,"ngFor","ngForOf"],[1,"feedback"],[1,"table__row"],[1,"table__row","table__row--details"],[1,"table","table-responsive","mat-elevation-z8"],["matSortDisableClear","","matSortActive","id","matSortDirection","asc","matSort","",3,"dataSource"],[4,"matFooterCellDef"],["data-label","Material",4,"matCellDef"],["matColumnDef","amount"],["data-label","Quantidade",4,"matCellDef"],["matColumnDef","price"],["data-label","Preco",4,"matCellDef"],["matColumnDef","subtotal"],["data-label","Subtotal",4,"matCellDef"],["class","table__row",4,"matRowDef","matRowDefColumns"],[4,"matFooterRowDef"],[1,"col-12","offset-md-10","col-md-2"],["mat-raised-button","","color","primary",1,"btn-block",3,"disabled","click"],["data-label","Material"],["data-label","Quantidade"],["data-label","Preco"],["data-label","Subtotal"]],template:function(t,e){1&t&&(h.Sb(0,"div",0),h.Sb(1,"div",1),h.Sb(2,"div",2),h.Sb(3,"h4",3),h.zc(4,"Passo 01"),h.Rb(),h.Sb(5,"p",4),h.zc(6,"Escolha o fornecedor desejado"),h.Rb(),h.Rb(),h.Sb(7,"div",5),h.Sb(8,"form",6),h.Sb(9,"div",7),h.Sb(10,"div",8),h.Sb(11,"mat-form-field",9),h.Sb(12,"mat-label"),h.zc(13,"Fornecedores"),h.Rb(),h.Sb(14,"mat-select",10),h.Zb("change",(function(){return e.clearPriceForm()})),h.xc(15,x,2,2,"mat-option",11),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.xc(16,at,10,2,"div",12),h.xc(17,Pt,36,5,"div",12),h.Rb()),2&t&&(h.Bb(8),h.ic("formGroup",e.orderForm),h.Bb(7),h.ic("ngForOf",e.providersList),h.Bb(1),h.ic("ngIf",e.orderForm.valid),h.Bb(1),h.ic("ngIf",e.priceForm.valid))},directives:[o.s,o.m,o.f,_.b,_.f,C.a,o.l,o.e,o.q,n.k,n.l,P.n,b.n,l.a,b.c,b.i,v.b,b.b,b.k,b.m,b.h,b.a,v.a,l.b,R.b,M.a,b.j,b.l,b.e,b.g,b.d,b.f],pipes:[O.a,w.a],styles:[".main-content[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:.5rem}.main-content[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.8rem;letter-spacing:1px}.main-content[_ngcontent-%COMP%]   .feedback[_ngcontent-%COMP%]{padding:1rem 0;font-weight:400;font-size:1rem}.main-content[_ngcontent-%COMP%]   .table.table--expanded[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .main-content[_ngcontent-%COMP%]   .table.table--expanded[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .main-content[_ngcontent-%COMP%]   .table.table--expanded[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:1px solid #ababab}.main-content[_ngcontent-%COMP%]   .table__row.table__row--details[_ngcontent-%COMP%]{height:0;min-height:0;overflow:hidden}@media screen and (max-width:992px){.main-content[_ngcontent-%COMP%]   .table__row.table__row--details.table__row--expanded[_ngcontent-%COMP%]{height:auto}.main-content[_ngcontent-%COMP%]   .table__row.table__row--details.table__row--expanded[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{height:auto;overflow:auto}}@media only screen and (min-width:992px){.main-content[_ngcontent-%COMP%]   .table__row.table__row--details[_ngcontent-%COMP%]{height:auto;min-height:auto;overflow:auto}}.main-content[_ngcontent-%COMP%]   .table__row.table__row--disabled[_ngcontent-%COMP%], .main-content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{background-color:#dedede}@media screen and (max-width:992px){.main-content[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]{vertical-align:middle;border:0}.main-content[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1em}.main-content[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]{display:none}.main-content[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{display:block;min-height:auto}.main-content[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(:last-child){border-bottom:5px solid #ddd}.main-content[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:50px;margin-bottom:4%;padding:0 1rem;overflow-y:auto;font-size:1em;text-align:right;border-bottom:1px solid #ddd}.main-content[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:before{float:left;margin-right:1rem;font-weight:700;font-size:.85em;text-transform:uppercase;content:attr(data-label)}.main-content[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-child{margin-top:4%}.main-content[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:last-child{margin-bottom:0;border-bottom:0}}"],data:{animation:[Object(r.n)("detailExpand",[Object(r.k)("collapsed",Object(r.l)({height:"0px",minHeight:"0"})),Object(r.k)("expanded",Object(r.l)({height:"*",minHeight:"*"})),Object(r.m)("expanded <=> collapsed",Object(r.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),t}(),Rt=a("qFsG"),Mt=a("NFeN");function Ot(t,e){1&t&&(h.Sb(0,"mat-header-cell",36),h.zc(1,"#"),h.Rb())}function wt(t,e){if(1&t&&(h.Sb(0,"mat-cell",37),h.zc(1),h.Rb()),2&t){var a=e.$implicit;h.Bb(1),h.Bc(" ",a.id," ")}}function xt(t,e){1&t&&(h.Sb(0,"mat-header-cell"),h.zc(1,"Fornecedor"),h.Rb())}function Dt(t,e){if(1&t&&(h.Sb(0,"mat-cell",38),h.zc(1),h.Rb()),2&t){var a=e.$implicit;h.Bb(1),h.Bc(" ",a.provider.companyName," ")}}function zt(t,e){1&t&&(h.Sb(0,"mat-header-cell",36),h.zc(1,"Criado em"),h.Rb())}function yt(t,e){if(1&t&&(h.Sb(0,"mat-cell",39),h.zc(1),h.ec(2,"dateFormat"),h.Rb()),2&t){var a=e.$implicit;h.Bb(1),h.Bc(" ",h.fc(2,1,a.createdAt)," ")}}function Bt(t,e){1&t&&(h.Sb(0,"mat-header-cell",36),h.zc(1,"Data de entrega"),h.Rb())}function Ft(t,e){if(1&t&&(h.Sb(0,"mat-cell",40),h.zc(1),h.ec(2,"dateFormat"),h.Rb()),2&t){var a=e.$implicit;h.Bb(1),h.Bc(" ",h.fc(2,1,a.deadlineDate)," ")}}function Et(t,e){1&t&&(h.Sb(0,"mat-header-cell",36),h.zc(1,"Situa\xe7\xe3o"),h.Rb())}function kt(t,e){if(1&t&&(h.Sb(0,"mat-cell",41),h.Sb(1,"span",42),h.zc(2),h.Rb(),h.Rb()),2&t){var a=e.$implicit,n=h.dc();h.Bb(1),h.Eb("badge-warning","Enviado"===n.orderStatusEnum[a.status])("badge-danger","Recusado"===n.orderStatusEnum[a.status]||"Cancelado"===n.orderStatusEnum[a.status])("badge-success","Conclu\xeddo"===n.orderStatusEnum[a.status]),h.Bb(1),h.Bc(" ",n.orderStatusEnum[a.status]," ")}}function Qt(t,e){1&t&&(h.Sb(0,"mat-header-cell"),h.zc(1,"A\xe7\xf5es"),h.Rb())}function Tt(t,e){if(1&t){var a=h.Tb();h.Sb(0,"mat-cell",43),h.Sb(1,"div",44),h.Sb(2,"button",45),h.Zb("click",(function(){h.pc(a);var t=e.$implicit,n=h.dc();return n.expandedElement=n.expandedElement===t?null:t})),h.Sb(3,"i",8),h.zc(4,"table_view"),h.Rb(),h.Rb(),h.Sb(5,"button",46),h.Sb(6,"i",8),h.zc(7,"edit"),h.Rb(),h.Rb(),h.Sb(8,"button",47),h.Sb(9,"i",8),h.zc(10,"close"),h.Rb(),h.Rb(),h.Rb(),h.Rb()}}function jt(t,e){if(1&t&&(h.Sb(0,"tr"),h.Sb(1,"td",51),h.zc(2),h.Rb(),h.Sb(3,"td"),h.zc(4),h.Rb(),h.Sb(5,"td"),h.zc(6),h.ec(7,"currencyBrl"),h.Rb(),h.Sb(8,"td"),h.zc(9),h.ec(10,"currencyBrl"),h.Rb(),h.Rb()),2&t){var a=e.$implicit;h.Bb(2),h.Ac(a.material.description),h.Bb(2),h.Ac(a.material.amount),h.Bb(2),h.Ac(h.fc(7,4,a.unityPrice)),h.Bb(3),h.Bc("",h.fc(10,6,a.unityPrice*a.material.amount)," ")}}function At(t,e){if(1&t&&(h.Sb(0,"mat-cell"),h.Sb(1,"div"),h.Sb(2,"table",48),h.Sb(3,"thead"),h.Sb(4,"tr"),h.Sb(5,"th",49),h.zc(6,"Material"),h.Rb(),h.Sb(7,"th",49),h.zc(8,"Quantidade"),h.Rb(),h.Sb(9,"th",49),h.zc(10,"Pre\xe7o Unit\xe1rio"),h.Rb(),h.Sb(11,"th",49),h.zc(12,"Subtotal"),h.Rb(),h.Rb(),h.Rb(),h.Sb(13,"tbody"),h.xc(14,jt,11,8,"tr",50),h.Rb(),h.Sb(15,"tfoot"),h.Sb(16,"tr"),h.Sb(17,"th",51),h.Sb(18,"strong"),h.zc(19,"Frete"),h.Rb(),h.Rb(),h.Sb(20,"td"),h.zc(21),h.ec(22,"currencyBrl"),h.Rb(),h.Sb(23,"th",51),h.Sb(24,"strong"),h.zc(25,"TOTAL"),h.Rb(),h.Rb(),h.Sb(26,"td"),h.Sb(27,"strong"),h.zc(28),h.ec(29,"currencyBrl"),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb()),2&t){var a=e.$implicit,n=h.dc();h.Cb("colspan",n.columnsToDisplay.length),h.Bb(1),h.ic("@detailExpand",a==n.expandedElement?"expanded":"collapsed"),h.Bb(13),h.ic("ngForOf",n.getOrdersMaterialsById(a.id)),h.Bb(7),h.Ac(h.fc(22,5,a.fare)),h.Bb(7),h.Ac(h.fc(29,7,n.getTotalPrice(a.id)+a.fare))}}function $t(t,e){1&t&&h.Nb(0,"mat-header-row")}function It(t,e){1&t&&h.Nb(0,"mat-row",52)}function Nt(t,e){if(1&t&&h.Nb(0,"mat-row",53),2&t){var a=e.$implicit,n=h.dc();h.Eb("table__row--expanded",n.expandedElement===a)}}var Lt=function(){return["/pedidos/criar"]},Ht=function(){return["expandedMaterialPrice"]},qt=[{path:"",component:m.b,children:[{path:"",component:function(){function t(t){this._orderService=t,this.columnsToDisplay=["id","provider","createdAt","deadline","status","actions"],this.dataSource=new b.o,this.orderStatusEnum=g.a,this.ordersMaterialsList=[]}return t.prototype.ngOnInit=function(){this._setOrdersList()},t.prototype.ngAfterViewInit=function(){this.dataSource.sort=this.sort},t.prototype.ngOnDestroy=function(){this.ordersSubscription&&this.ordersSubscription.unsubscribe(),this.ordersMaterialSubscription&&this.ordersMaterialSubscription.unsubscribe()},t.prototype.applyFilter=function(t){this.dataSource.filter=t.trim().toLocaleLowerCase()},t.prototype.getTotalPrice=function(t){var e=0;return this.getOrdersMaterialsById(t).map((function(t){e+=t.material.amount*t.unityPrice})),e},t.prototype.getOrdersMaterialsById=function(t){return this.ordersMaterialsList.filter((function(e){return e.orderId===t}))},t.prototype._setOrdersList=function(){var t=this;this._orderService.fetchOrders(),this.ordersSubscription=this._orderService.orders.subscribe((function(e){e.length<=0||(t.dataSource=new b.o(e))})),this.ordersMaterialSubscription=this._orderService.ordersMaterials.subscribe((function(e){e.length<=0||(t.ordersMaterialsList=e)}))},t.\u0275fac=function(e){return new(e||t)(h.Mb(u.a))},t.\u0275cmp=h.Gb({type:t,selectors:[["app-dashboard"]],viewQuery:function(t,e){var a;1&t&&h.Cc(l.a,!0),2&t&&h.mc(a=h.ac())&&(e.sort=a.first)},decls:47,vars:7,consts:[[1,"main-content"],[1,"row","justify-content-between"],[1,"col-12","col-md-3"],["appearance","outline"],["matInput","","placeholder","Observa\xe7\xe3o, Situa\xe7\xe3o",3,"keyup"],["matSuffix",""],[1,"col-12","col-md-3","mr-1","d-flex","justify-content-end"],["color","primary","rel","tooltip","mat-fab","","matTooltip","Criar pedido de compras",3,"routerLink"],[1,"material-icons"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-header","card-header-info"],[1,"card-title"],[1,"card-body"],[1,"table","table-responsive","mat-elevation-z8"],["matSortDisableClear","","matSortActive","id","matSortDirection","asc","multiTemplateDataRows","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],["data-label","#",4,"matCellDef"],["matColumnDef","provider"],[4,"matHeaderCellDef"],["data-label","Fornecedor",4,"matCellDef"],["matColumnDef","createdAt"],["data-label","Criado em",4,"matCellDef"],["matColumnDef","deadline"],["data-label","Data de entrega",4,"matCellDef"],["matColumnDef","status"],["data-label","Situa\xe7\xe3o",4,"matCellDef"],["matColumnDef","actions"],["class","td-actions text-center","data-label","A\xe7\xf5es",4,"matCellDef"],["matColumnDef","expandedMaterialPrice"],[4,"matCellDef"],[4,"matHeaderRowDef"],["class","table__row",4,"matRowDef","matRowDefColumns"],["class","table__row table__row--details",3,"table__row--expanded",4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],["data-label","#"],["data-label","Fornecedor"],["data-label","Criado em"],["data-label","Data de entrega"],["data-label","Situa\xe7\xe3o"],[1,"badge"],["data-label","A\xe7\xf5es",1,"td-actions","text-center"],[1,"btn-group"],["mat-raised-button","","matTooltip","Visualizar Materiais","rel","tooltip","type","button",1,"btn","btn-info",3,"click"],["rel","tooltip","mat-raised-button","","matTooltip","Editar","type","button",1,"btn","btn-warning"],["rel","tooltip","mat-raised-button","","matTooltip","Excluir","type","button",1,"btn","btn-danger"],[1,"table","table-responsive","table--expanded"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[1,"table__row"],[1,"table__row","table__row--details"]],template:function(t,e){1&t&&(h.Sb(0,"div",0),h.Sb(1,"div",1),h.Sb(2,"div",2),h.Sb(3,"mat-form-field",3),h.Sb(4,"mat-label"),h.zc(5,"Pesquisar"),h.Rb(),h.Sb(6,"input",4),h.Zb("keyup",(function(t){return e.applyFilter(t.target.value)})),h.Rb(),h.Sb(7,"mat-icon",5),h.zc(8,"search"),h.Rb(),h.Sb(9,"mat-hint"),h.zc(10,"Exemplo: Em andamento"),h.Rb(),h.Rb(),h.Rb(),h.Sb(11,"div",6),h.Sb(12,"button",7),h.Sb(13,"i",8),h.zc(14,"add"),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Sb(15,"div",9),h.Sb(16,"div",10),h.Sb(17,"div",11),h.Sb(18,"div",12),h.Sb(19,"h4",13),h.zc(20,"Pedidos de Compras"),h.Rb(),h.Rb(),h.Sb(21,"div",14),h.Sb(22,"div",15),h.Sb(23,"mat-table",16),h.Qb(24,17),h.xc(25,Ot,2,0,"mat-header-cell",18),h.xc(26,wt,2,1,"mat-cell",19),h.Pb(),h.Qb(27,20),h.xc(28,xt,2,0,"mat-header-cell",21),h.xc(29,Dt,2,1,"mat-cell",22),h.Pb(),h.Qb(30,23),h.xc(31,zt,2,0,"mat-header-cell",18),h.xc(32,yt,3,3,"mat-cell",24),h.Pb(),h.Qb(33,25),h.xc(34,Bt,2,0,"mat-header-cell",18),h.xc(35,Ft,3,3,"mat-cell",26),h.Pb(),h.Qb(36,27),h.xc(37,Et,2,0,"mat-header-cell",18),h.xc(38,kt,3,7,"mat-cell",28),h.Pb(),h.Qb(39,29),h.xc(40,Qt,2,0,"mat-header-cell",21),h.xc(41,Tt,11,0,"mat-cell",30),h.Pb(),h.Qb(42,31),h.xc(43,At,30,9,"mat-cell",32),h.Pb(),h.xc(44,$t,1,0,"mat-header-row",33),h.xc(45,It,1,0,"mat-row",34),h.xc(46,Nt,1,2,"mat-row",35),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb()),2&t&&(h.Bb(12),h.ic("routerLink",h.jc(5,Lt)),h.Bb(11),h.ic("dataSource",e.dataSource),h.Bb(21),h.ic("matHeaderRowDef",e.columnsToDisplay),h.Bb(1),h.ic("matRowDefColumns",e.columnsToDisplay),h.Bb(1),h.ic("matRowDefColumns",h.jc(6,Ht)))},directives:[_.b,_.f,Rt.b,Mt.a,_.g,_.e,R.b,M.a,i.d,b.n,l.a,b.c,b.i,b.b,b.k,b.m,b.h,l.b,b.a,n.k,b.j,b.l],pipes:[O.a,w.a],styles:[".main-content[_ngcontent-%COMP%]   .td-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:.5rem}.main-content[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.8rem;letter-spacing:1px}.main-content[_ngcontent-%COMP%]   .feedback[_ngcontent-%COMP%]{padding:1rem 0;font-weight:400;font-size:1rem}.main-content[_ngcontent-%COMP%]   .table.table--expanded[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .main-content[_ngcontent-%COMP%]   .table.table--expanded[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .main-content[_ngcontent-%COMP%]   .table.table--expanded[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:1px solid #ababab}.main-content[_ngcontent-%COMP%]   .table__row.table__row--details[_ngcontent-%COMP%]{height:0;min-height:0;overflow:hidden}@media screen and (max-width:992px){.main-content[_ngcontent-%COMP%]   .table__row.table__row--details.table__row--expanded[_ngcontent-%COMP%]{height:auto}.main-content[_ngcontent-%COMP%]   .table__row.table__row--details.table__row--expanded[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{height:auto;overflow:auto}}@media only screen and (min-width:992px){.main-content[_ngcontent-%COMP%]   .table__row.table__row--details[_ngcontent-%COMP%]{height:auto;min-height:auto;overflow:auto}}.main-content[_ngcontent-%COMP%]   .table__row.table__row--disabled[_ngcontent-%COMP%], .main-content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{background-color:#dedede}@media screen and (max-width:992px){.main-content[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]{vertical-align:middle;border:0}.main-content[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1em}.main-content[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]{display:none}.main-content[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{display:block;min-height:auto}.main-content[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(:last-child){border-bottom:5px solid #ddd}.main-content[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:50px;margin-bottom:4%;padding:0 1rem;overflow-y:auto;font-size:1em;text-align:right;border-bottom:1px solid #ddd}.main-content[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:before{float:left;margin-right:1rem;font-weight:700;font-size:.85em;text-transform:uppercase;content:attr(data-label)}.main-content[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-child{margin-top:4%}.main-content[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:last-child{margin-bottom:0;border-bottom:0}}"],data:{animation:[Object(r.n)("detailExpand",[Object(r.k)("collapsed",Object(r.l)({height:"0px",minHeight:"0"})),Object(r.k)("expanded",Object(r.l)({height:"*",minHeight:"*"})),Object(r.m)("expanded <=> collapsed",Object(r.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),t}()},{path:"criar",component:vt}]}],Gt=function(){function t(){}return t.\u0275mod=h.Kb({type:t}),t.\u0275inj=h.Jb({factory:function(e){return new(e||t)},imports:[[i.g.forChild(qt)],i.g]}),t}(),Kt=a("iTUp"),Vt=a("PCNd"),Jt=function(){function t(){}return t.\u0275mod=h.Kb({type:t}),t.\u0275inj=h.Jb({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,o.g,c.a,Gt,Kt.a,o.p,i.g,Vt.a]]}),t}()}}]);